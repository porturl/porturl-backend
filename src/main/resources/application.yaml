---
porturl:
  security:
    enabled: true
  cors:
    allowed-origins:
      - http://localhost:4200
      - http://127.0.0.1:4200
  otel:
    enabled: ${PORTURL_OTEL_ENABLED:false}
    alloy-url: ${PORTURL_OTEL_ALLOY_URL:http://localhost:4318}
    health-check-interval: 30s
  storage:
    location: data/uploads
    type: ${PORTURL_STORAGE_TYPE:SQL}
    yaml-path: ${PORTURL_YAML_PATH:data/config.yaml}
  cleanup:
    # Set to true to enable the daily cleanup of orphaned images
    enabled: false
    # A cron expression for when the task should run. Default is 3 AM daily.
    cron: "0 0 3 * * ?"
info:
  auth:
    issuer-uri: "${spring.security.oauth2.resourceserver.jwt.issuer-uri}"
management:
  info:
    env:
      enabled: true
  endpoints:
    web:
      exposure:
        include: info, health, metrics, prometheus
  otlp:
    metrics:
      export:
        enabled: ${porturl.otel.enabled}
        url: ${OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:http://localhost:4318/v1/metrics}
        step: 1m
    tracing:
      export:
        enabled: ${porturl.otel.enabled}
    logging:
      export:
        enabled: ${porturl.otel.enabled}
  opentelemetry:
    enabled: ${porturl.otel.enabled}
    logging:
      export:
        enabled: ${porturl.otel.enabled}
        otlp:
          endpoint: ${OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:http://localhost:4318/v1/logs}
    tracing:
      export:
        enabled: ${porturl.otel.enabled}
        otlp:
          endpoint: ${OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:http://localhost:4318/v1/traces}
    resource:
      attributes:
        service.name: porturl-backend
  tracing:
    enabled: ${porturl.otel.enabled}
    sampling:
      probability: ${MANAGEMENT_TRACING_SAMPLING_PROBABILITY:1.0}
    propagation:
      type: W3C
logging:
  level:
    root: INFO
    org.friesoft.porturl: DEBUG
spring:
  servlet:
    multipart:
      enabled: true
      max-file-size: 10MB
      max-request-size: 10MB
  application:
    name: porturl-backend
  main:
    banner-mode: "off"
  datasource:
    url: jdbc:h2:file:./data/porturl
    driverClassName: org.h2.Driver
  jpa:
    database-platform: org.hibernate.dialect.H2Dialect
    generate-ddl: false
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: https://sso.yourdomain.com/auth/realms/<yourrealm>
